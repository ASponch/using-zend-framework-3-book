<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Filtering Uploaded Files -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Uploading_Files_with_Forms/Validating_Uploaded_Files.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Uploading_Files_with_Forms/InputFilter_Container__amp__File_Uploads.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Uploading_Files_with_Forms.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Uploading Files with Forms</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Filtering_Uploaded_Files">10.5. Filtering Uploaded Files</h2>
<p>Zend Framework 3 provides several filters intended for "transforming" file fields. Those filter
classes (listed in table 10.2) belong to <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/components/zendframework/zend-filter.html" class="api-link">Zend\Filter</a></code> component and live in <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/components/zendframework/zend-filter.html" class="api-link">Zend\Filter\File</a></code> namespace.</p>
<div class="table-wrapper">
<div class="table-caption">Table 10.2. Standard File Filters</div><table>
<thead>
<tr>
<th> <em>Class name</em>    </th>
<th> <em>Short alias</em> </th>
<th> <em>Description</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/Rename.html" class="api-link">Rename</a></code>        </td>
<td>  <code>FileRename</code>  </td>
<td>  Renames/moves an arbitrary file.                              </td>
</tr>
<tr>
<td> <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/RenameUpload.html" class="api-link">RenameUpload</a></code>  </td>
<td> <code>FileRenameUpload</code> </td>
<td> Renames/moves the uploaded file with security checks.    </td>
</tr>
<tr>
<td> <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/Encrypt.html" class="api-link">Encrypt</a></code>       </td>
<td> <code>FileEncrypt</code> </td>
<td> Encrypts a given file and stores the encrypted file content.  </td>
</tr>
<tr>
<td> <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/Decrypt.html" class="api-link">Decrypt</a></code>       </td>
<td> <code>FileDecrypt</code> </td>
<td> Decrypts a given file and stores the decrypted file content.  </td>
</tr>
<tr>
<td> <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/LowerCase.html" class="api-link">LowerCase</a></code>     </td>
<td> <code>FileLowerCase</code></td>
<td> Converts file content to lower case letters.                  </td>
</tr>
<tr>
<td> <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/UpperCase.html" class="api-link">UpperCase</a></code>     </td>
<td> <code>FileUpperCase</code></td>
<td> Converts file content to upper case letters.                  </td>
</tr>
</tbody>
</table>
</div>
<p>From the table, you can see that filters can be divided into the following groups:</p>
<ul>
<li>filters for moving uploaded files from a temporary location to their persistent directory;</li>
<li>filters for encryption and decryption of files;</li>
<li>filters for converting text files to upper-case and lower-case letters.</li>
</ul>
<blockquote class="notquote tip" data-type="tip"><p> Please note that since file filters live in <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/components/zendframework/zend-filter.html" class="api-link">Zend\Filter\File</a></code> namespace, their short aliases
 (that you use when creating a filter with the factory) start with <code>File</code> prefix. For example, 
 the <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/RenameUpload.html" class="api-link">RenameUpload</a></code> filter has <code>FileRenameUpload</code> alias.  </p>
</blockquote><p>The <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/Encrypt.html" class="api-link">Encrypt</a></code> and <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/Decrypt.html" class="api-link">Decrypt</a></code> filters allow to apply various encryption/decryption algorithms
to the uploaded file (concrete algorithm is attached by specifying the certain adapter). The <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/LowerCase.html" class="api-link">LowerCase</a></code> and
<code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/UpperCase.html" class="api-link">UpperCase</a></code> filters are suitable for converting text files to lower- and upper-case, respectively <sup id="fnref:four"><a href="#fn:four" class="footnote-ref" rel="footnote">43</a></sup>.</p>
<footnotes id="fn:four"><p><sup>43)</sup> In the author's opinion, the above mentioned four filters are not very useful when working 
with uploaded files, because you rarely need to encrypt an uploaded file or convert it to
lower case letters. </p>
</footnotes>
<p>The <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/Rename.html" class="api-link">Rename</a></code> filter allows to rename and/or move an arbitrary file (not only uploaded file). 
It uses the <code>rename()</code> PHP function internally, and that's why it is in general not recommended 
to use this filter with uploaded files because of security reasons.</p>
<p>The <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/RenameUpload.html" class="api-link">RenameUpload</a></code> filter seems to be much more useful than other filters, because it allows to encapsulate 
the call of the <code>move_uploaded_file()</code> function and move/rename the uploaded file from a temporary location 
to its persistent directory. We will show how to use the <code><a href="https://olegkrivtsov.github.io/zf3-api-reference/html/classes/Zend/Filter/File/RenameUpload.html" class="api-link">RenameUpload</a></code> filter in the <em>Image Gallery</em>
code example later in this chapter.</p>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Uploading_Files_with_Forms.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Uploading Files with Forms</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Uploading_Files_with_Forms/Validating_Uploaded_Files.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Uploading_Files_with_Forms/InputFilter_Container__amp__File_Uploads.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2018 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
$(document).ready(function() {

$(document).on('click', '#contact-close', function(event){
    event.preventDefault();
    setCookie('contact-cookie', '1', 30);
    $('#contact_popup').slideToggle();
});

if ($(document).width() < 640) {
    return; // Don't show this popup on small devices
}
 
var style = `
<style>
#contact_popup {
 width:360px;
 padding:20px;
 background:#4185f2;
 position:fixed;
 left:50%;
 margin-left: -180px;
 bottom:0;
 padding: 10px;
 display:none;
 -moz-border-radius-topleft:20px;
 -moz-border-radius-topright:20px;
 -webkit-border-top-left-radius:20px;
 -webkit-border-top-right-radius:20px;
}
#contact_popup h1 {
 margin-top: 0;
 color:#fff;
 font-size:20px;
}
#contact_popup p {
 margin:0;
 color:#fff;
}

.contact-btn {
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}

.btn-yes {
    background-color: #4CAF50; /* Green */
}

.btn-no {
    background-color: red;
}
</style> 
`;

$('head').append(style);
 
 var popupDiv = `
<div id="contact_popup">
   <h1>Need Help with ZF3?</h1>
   
   <p>You can contact Oleg (the author of this book) to get paid consulting and/or ZF3 development assistance.</p>
   <br>
   <p>
     <a class="contact-btn btn-yes" href="https://olegkrivtcov.wordpress.com/contact/">Contact Now</a>&nbsp;&nbsp;<a id="contact-close" class="contact-btn btn-no" href="#">Hide</a>
   </P>
 </div>
</div>`;
 
 $('body').append(popupDiv);

var cookie = getCookie('contact-cookie');

if (cookie)
    return; // Don't show this popup if user refused

if (Math.floor(Math.random() * 50) > 1) {
    return; // Show this popup in 2% of views
}

$('#contact_popup').slideToggle();
 
 function openPopup(hash) {
   $(hash + '_popup').slideToggle().addClass('open');
 }
 
 function openAndClose(hash) {
   if ($(hash + '_popup').hasClass('open')) {
     $($(hash + '_popup')).slideToggle().removeClass();
   } else {
     $('#container div.open').slideToggle().removeClass();
     $(hash + '_popup').slideToggle().addClass('open');
   }
 }
 
 function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}
 
});
</script><script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

