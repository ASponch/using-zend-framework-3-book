<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book about Zend Framework">
<meta name="keywords" content="php,zend framework,book,tutorial,documentation,learn,free">
<meta name="author" content="(c) 2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>La Arquitectura de Doctrine -- Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book about Zend Framework            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Apéndice_D__Introducción_a_Doctrine/Doctrine_y_la_Administración_de_la_Base_de_Datos.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Apéndice_D__Introducción_a_Doctrine/Resumen.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Apéndice_D__Introducción_a_Doctrine.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Apéndice D. Introducción a Doctrine</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="La_Arquitectura_de_Doctrine"> La Arquitectura de Doctrine</h2>
<p>El <a href="http://www.doctrine-project.org/">Proyecto Doctrine</a> está constituido por
varias librerías (componentes). Cada componente de Doctrine se distribuye como
un paquete que se puede instalar usando Composer y está registrado en el catalogo
<a href="https://packagist.org/">Packagist.org</a>. Se instala de la misma manera en que
se instalan los componentes de Zend Framework 3.</p>
<p>Aquí ofreceremos una breve descripción de la arquitectura de la biblioteca Doctrine
para dar una idea general de sus capacidades.</p>
<h3 id="Componentes_para_las_Bases_de_Datos_Relacionales"> Componentes para las Bases de Datos Relacionales</h3>
<p>Los componentes principales de Doctrine diseñados para trabajar con bases de datos
relacionales se muestran en la figura D.2 marcados con color verde. Los bloques
azules representan el motor PHP y las extensiones PHP. Doctrine esta construido
sobre estos dos elementos.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/doctrine_intro/doctrine_orm_architecture.png">
<img src="../../en/images/doctrine_intro/doctrine_orm_architecture.png" alt="Figura D.2. Componentes de Doctrine diseñados para trabajar con base de datos relacionales" /></a>
<span class="image-caption">Figura D.2. Componentes de Doctrine diseñados para trabajar con base de datos relacionales</span>
</span>
</p>
<p>Como podemos ver en la figura Doctrine se basa en las características del motor
de PHP y en las extensiones de PHP que son en realidad usados como controladores
para cada sistema de gestión de base de datos. Abajo en la capa base están los
componentes que constituyen el núcleo de Doctrine (como <code>Annotations</code>, <code>Common</code>,
etc.) que proveen las funcionalidades esenciales para los otros componentes de
más alto nivel. El componente <code>DBAL</code> provee una capa de abstracción para los
diferentes tipos de base de datos. Y arriba de todo esto está el componente <code>ORM</code>
que provee la API para trabajar con los datos de una manera orientada a objetos.
Los componentes <code>DoctrineModule</code> y <code>DoctrineORMModule</code> se diseñan para la
integración con Zend Framework 3.</p>
<blockquote class="notquote information" data-type="information"><p> El componente ORM de Doctrine usa el patrón llamado <a href="http://en.wikipedia.org/wiki/Data_mapper_pattern">Data Mapper</a>.
 Este patrón dice que una tabla de base de datos se puede representar como una
 clase entidad de PHP. La base de datos en este patrón se considera como un
 tipo de repositorio (deposito de entidades). Cuando recuperamos una entidad
 del repositorio una sentencia SQL se ejecuta internamente y una instancia
 de la clase entidad de PHP se construye y sus propiedades se llenan con
 los datos.</p>
</blockquote><p>Análogamente a los componentes de ZF3 los nombres de los componentes de Doctrine
tiene dos partes: el nombre del proveedor ("Doctrine") y el nombre del componente
(por ejemplo, "Common"). Abajo podemos encontrar una lista de los componentes
de Doctrine junto con el nombre del paquete que se debe usar para instalarlo
usando Composer y una breve descripción:</p>
<ul>
<li><p><code>Doctrine\Common</code>. Biblioteca Común para los proyectos de Doctrine. Este
componente contiene funcionalidades usadas comúnmente. Para instalarlo
mediante composer usamos el nombre del paquete <code>doctrine/common</code>.</p>
</li>
<li><p><code>Doctrine\Annotations</code>. Analizador Sintáctico de las anotaciones de Docblock.
Se instala mediante Composer con el paquete <code>doctrine/annotations</code>.</p>
</li>
<li><p><code>Doctrine\Inflector</code>. Manipulaciones comunes de cadena de caracteres en
relación con las mayúsculas y minúsculas y reglas para singulares y plurales.
El paquete instalable con Composer tine como nombre <code>doctrine/inflector</code>.</p>
</li>
<li><p><code>Doctrine\Lexer</code>. Biblioteca Base para un analizador de léxico que se puede
usar como un analizador sintáctico descendente recursivo.
El paquete para instalarlo usando composer es <code>doctrine/lexer</code>.</p>
</li>
<li><p><code>Doctrine\Cache</code>. La Biblioteca de Cache ofrece una API orientada a objetos
para muchos backends cache. Se instala mediante composer con el paquete
<code>doctrine/cache</code>.</p>
</li>
<li><p><code>Doctrine\DBAL</code>. Capa de Abstracción de Base de Datos. Es una ligera y delgada
capa en tiempo de ejecución alrededor de una API tipo PDO y un montón de extras,
características horizontales como introspección del esquema de base de datos
y manipulación mediante una API orientada a objetos. Se instala con el paquete
<code>doctrine/dbal</code> usando Composer.</p>
</li>
<li><p><code>Doctrine\Collections</code>. Biblioteca de Abstracción de Colecciones. Se instala
con el paquete llamado <code>doctrine/collections</code> mediante Composer.</p>
</li>
<li><p><code>Doctrine\ORM</code>. Mapeo objeto-relacional para PHP. Este es un componente de
Doctrine que provee una manera para trabajar con modelos de entidad de una
manera orientada a objetos en lugar de consultas SQL crudas. El paquete para
Composer es <code>doctrine/orm</code>.</p>
</li>
<li><p><code>Doctrine\Migrations</code>. Migraciones para el esquema de base de datos que usa
Doctrine DBAL. Provee una manera consistente de manejar el esquema de base
de base de datos y de actualizarlo. Se instala usando Composer con el paquete
<code>doctrine/migrations</code>.</p>
</li>
<li><p><code>Doctrine\DataFixtures</code>. Datos de Prueba para todos los Administradores de
Objetos de Doctrine. Provee un framework para crear datos de prueba para la
base de datos. Con Composer se instala mediante el paquete <code>doctrine/data-fixtures</code>.</p>
</li>
</ul>
<p>Como Doctrine usa el autocargador de PHP y el estándar PSR-4 las clases que
pertenecen a un determinado componente están en el namespace del componente.
Por ejemplo, la clase <code>EntityManager</code> pertenece al componente <code>Doctrine\ORM</code>
y está en el namespace <code>Doctrine\ORM</code>.</p>
<h3 id="Componentes_para_las_Bases_de_Datos_Documentales_NoSQL"> Componentes para las Bases de Datos Documentales NoSQL</h3>
<p>Los componentes de Doctrine diseñados para trabajar con bases de datos documentales
NoSQL (MongoDB, CouchDB, etc) se muestran en la figura D.3 y se marcan en verde.
Los bloques azules representan al motor de PHP y a las extensiones de PHP sobre
las que Doctrine está construido.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/doctrine_intro/doctrine_odm_architecture.png">
<img src="../../en/images/doctrine_intro/doctrine_odm_architecture.png" alt="Figura D.3. Componentes de Doctrine diseñados para trabajar con bases de datos documentales" /></a>
<span class="image-caption">Figura D.3. Componentes de Doctrine diseñados para trabajar con bases de datos documentales</span>
</span>
</p>
<p>Como podemos ver en la figura D.3 los componentes NoSQL de Doctrine se basan en
las características del motor PHP y en las extensiones de PHP que se pueden
considerar "controladores" para un sistema gestor de base de datos. Arriba de la
capa base están los componentes de nivel medio. El componente <code>Common</code> es el
mismo componente que se muestra en la figura D.2 que provee funcionalidades
usadas comúnmente. Los componentes <code>MongoDB</code> y CouchDB<code> provee una API de bajo
nivel para sus correspondientes bases de datos. Los componentes </code>MongodbODM<code>,
</code>CouchdbODM<code>, </code>OrientdbODM<code> y </code>PhpcrODM<code> proveen Mapeo objeto-documento (ODM)
para sus correspondientes bases de datos. El concepto ODM es muy similar al ORM
en el sentido de que provee la capacidad de trabajar con bases de datos NoSQL
de una manera orientada a objetos mediate el mapeo de un documento a una clase
entidad de PHP. El componente </code>DoctrineMongoODMModule` tiene el propósito de
integrar Doctrine con ZF3.</p>
<p>Abajo podemos encontrar una lista de los componentes junto con el nombre del
paquete para instalar con Composer y una breve descripción:</p>
<ul>
<li><p><code>Doctrine\MongoDB</code> es la Capa de Abstracción de Doctrine para MongoDB.
El nombre del paquete para instalar con Composer es <code>doctrine/mongodb</code>.</p>
</li>
<li><p><code>Doctrine\MongodbODM</code> (Mapeo objeto-documento) provee una manera de mapear
documentos NoSQL a un modelo de entidad PHP. El nombre del paquete para
Composer es <code>doctrine/mongodb-odm</code>.</p>
</li>
<li><p><code>Doctrine\MongoODMModule</code> es un módulo de Zend Framework 3 que provee
funcionalidades para Doctrine MongoDB ODM. Facilita la integración de Doctrine
con ZF3. El paquete para Composer se llama <code>doctrine/doctrine-mongo-odm-module</code>.</p>
</li>
<li><p><code>Doctrine\CouchDB</code> es un componente que provee una API simple que se envuelve
alrededor de la API HTTP de CouchDB. El paqueta para instalarlo usando
Composer es <code>doctrine/couchdb</code>.</p>
</li>
<li><p><code>Doctrine\CouchdbODM</code> es el componente de Mapeo objeto-documento para CouchDB.
Es análogo a Doctrine ORM en el sentido de que provee una manera de acceder
a la base de datos de una manera orientada a objetos. Se instala mediante
Composer con el paquete <code>doctrine/couchdb-odm</code>.</p>
</li>
<li><p><code>Doctrine\OrientdbODM</code> es un conjunto de bibliotecas PHP para usar OrientDB
con PHP. El paquete para Composer se llama <code>doctrine/orientdb-odm</code>.</p>
</li>
<li><p><code>Doctrine\PhpcrODM</code> es componente de mapeo objeto-documento para PHPCR.
Se instala con el paquete <code>doctrine/phpcr-odm</code>.</p>
</li>
</ul>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Apéndice_D__Introducción_a_Doctrine.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Apéndice D. Introducción a Doctrine</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Apéndice_D__Introducción_a_Doctrine/Doctrine_y_la_Administración_de_la_Base_de_Datos.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Apéndice_D__Introducción_a_Doctrine/Resumen.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright (c) 2018 by Oleg Krivtsov            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
$(document).ready(function() {

$(document).on('click', '#contact-close', function(event){
    event.preventDefault();
    setCookie('contact-cookie', '1', 30);
    $('#contact_popup').slideToggle();
});

if ($(document).width() < 640) {
    return; // Don't show this popup on small devices
}
 
var style = `
<style>
#contact_popup {
 width:360px;
 padding:20px;
 background:#4185f2;
 position:fixed;
 left:50%;
 margin-left: -180px;
 bottom:0;
 padding: 10px;
 display:none;
 -moz-border-radius-topleft:20px;
 -moz-border-radius-topright:20px;
 -webkit-border-top-left-radius:20px;
 -webkit-border-top-right-radius:20px;
}
#contact_popup h1 {
 margin-top: 0;
 color:#fff;
 font-size:20px;
}
#contact_popup p {
 margin:0;
 color:#fff;
}

.contact-btn {
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}

.btn-yes {
    background-color: #4CAF50; /* Green */
}

.btn-no {
    background-color: red;
}
</style> 
`;

$('head').append(style);
 
 var popupDiv = `
<div id="contact_popup">
   <h1>Need Help with ZF3?</h1>
   
   <p>You can contact Oleg (author of this book) to get paid consulting and/or ZF3 development assistance.</p>
   <br>
   <p>
     <a class="contact-btn btn-yes" href="https://olegkrivtcov.wordpress.com/contact/">Contact now</a>&nbsp;&nbsp;<a id="contact-close" class="contact-btn btn-no" href="#">Not Now</a>
   </P>
 </div>
</div>`;
 
 $('body').append(popupDiv);

var cookie = getCookie('contact-cookie');

if (cookie)
    return; // Don't show this popup if user refused

if (Math.floor(Math.random() * 50) > 1) {
    return; // Show this popup in 2% of views
}

$('#contact_popup').slideToggle();
 
 function openPopup(hash) {
   $(hash + '_popup').slideToggle().addClass('open');
 }
 
 function openAndClose(hash) {
   if ($(hash + '_popup').hasClass('open')) {
     $($(hash + '_popup')).slideToggle().removeClass();
   } else {
     $('#container div.open').slideToggle().removeClass();
     $(hash + '_popup').slideToggle().addClass('open');
   }
 }
 
 function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}
 
});
</script><script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

